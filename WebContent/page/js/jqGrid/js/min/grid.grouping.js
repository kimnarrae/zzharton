var $jscomp={scope:{},findInternal:function(b,u,e){b instanceof String&&(b=String(b));for(var c=b.length,k=0;k<c;k++){var l=b[k];if(u.call(e,l,k,b))return{i:k,v:l}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,u,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[u]=e.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,u,e,c){if(u){e=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var k=b[c];k in e||(e[k]={});e=e[k]}b=b[b.length-1];c=e[b];u=u(c);u!=c&&null!=u&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:u})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6-impl","es3");
(function(b){"function"===typeof define&&define.amd?define(["jquery","./grid.base"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var u=b.jgrid,e=b.fn.jqGrid;u.extend({groupingSetup:function(){return this.each(function(){var c,k;k=this.p;var l=k.colModel,a=k.groupingView,f,m,d=function(){return""};if(null===a||"object"!==typeof a&&!b.isFunction(a))k.grouping=!1;else if(a.groupField.length){void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);a.lastvalues=
[];a._locgr||(a.groups=[]);a.counters=[];for(c=0;c<a.groupField.length;c++)a.groupOrder[c]||(a.groupOrder[c]="asc"),a.groupText[c]||(a.groupText[c]="{0}"),"boolean"!==typeof a.groupColumnShow[c]&&(a.groupColumnShow[c]=!0),"boolean"!==typeof a.groupSummary[c]&&(a.groupSummary[c]=!1),a.groupSummaryPos[c]||(a.groupSummaryPos[c]="footer"),f=l[k.iColByName[a.groupField[c]]],!0===a.groupColumnShow[c]?(a.visibiltyOnNextGrouping[c]=!0,null!=f&&!0===f.hidden&&e.showCol.call(b(this),a.groupField[c])):(a.visibiltyOnNextGrouping[c]=
b("#"+u.jqID(k.id+"_"+a.groupField[c])).is(":visible"),null!=f&&!0!==f.hidden&&e.hideCol.call(b(this),a.groupField[c]));a.summary=[];a.hideFirstGroupCol&&(a.formatDisplayField[0]=function(a){return a});c=0;for(k=l.length;c<k;c++)f=l[c],a.hideFirstGroupCol&&!f.hidden&&a.groupField[0]===f.name&&(f.formatter=d),f.summaryType&&(m={nm:f.name,st:f.summaryType,v:"",sr:f.summaryRound,srt:f.summaryRoundType||"round"},f.summaryDivider&&(m.sd=f.summaryDivider,m.vd=""),a.summary.push(m))}else k.grouping=!1})},
groupingPrepare:function(c,k){this.each(function(){var l=this.p.groupingView,a=l.groups,f=l.counters,m=l.lastvalues,d=l.isInTheSameGroup,C=l.groupField.length,g,q,u,n,t,p,B=!1,G=e.groupingCalculations.handler;for(g=0;g<C;g++)if(n=l.groupField[g],q=l.displayField[g],t=c[n],p=null==q?null:c[q],null==p&&(p=t),void 0!==t){u=[];for(q=0;q<=g;q++)u.push(c[l.groupField[q]]);q={idx:g,dataIndex:n,value:t,displayValue:p,startRow:k,cnt:1,keys:u,summary:[]};n={cnt:1,pos:a.length,summary:b.extend(!0,[],l.summary)};
0===k?(a.push(q),m[g]=t,f[g]=n):"object"===typeof t||(b.isArray(d)&&b.isFunction(d[g])?d[g].call(this,m[g],t,g,l):m[g]===t)?B?(a.push(q),m[g]=t,f[g]=n):(n=f[g],n.cnt+=1,a[n.pos].cnt=n.cnt):(a.push(q),m[g]=t,B=!0,f[g]=n);t=a[n.pos];var z;for(u=0;u<n.summary.length;u++)p=n.summary[u],z=b.isArray(p.st)?p.st[q.idx]:p.st,b.isFunction(z)?p.v=z.call(this,p.v,p.nm,c,q):(p.v=G.call(b(this),z,p.v,p.nm,p.sr,p.srt,c),"avg"===z.toLowerCase()&&p.sd&&(p.vd=G.call(b(this),z,p.vd,p.sd,p.sr,p.srt,c)));t.summary=n.summary;
for(q=n.pos-1;0<=q;q--)if(a[q].idx<a[n.pos].idx){a[n.pos].parentGroup=a[q];break}}});return this},groupingToggle:function(c,k){this.each(function(){var l=this.p,a=l.groupingView,f=a.minusicon,m=a.plusicon,d=k?b(k).closest("tr.jqgroup"):b("#"+u.jqID(c)),e,g,q=!0,w=!1,n=[],t=function(a){var b,c=a.length;for(b=0;b<c;b++)n.push(a[b])},p=parseInt(d.data("jqgrouplevel"),10);l.frozenColumns&&0<d.length&&(g=d[0].rowIndex,d=b(this.rows[g]),d=d.add(this.grid.fbRows[g]));e=d.find(">td>span.tree-wrap");u.hasAllClasses(e,
f)?(e.removeClass(f).addClass(m),w=!0):e.removeClass(m).addClass(f);for(d=d.next();d.length;d=d.next())if(d.hasClass("jqfoot"))if(e=parseInt(d.data("jqfootlevel"),10),w){if(e=parseInt(d.data("jqfootlevel"),10),(!a.showSummaryOnHide&&e===p||e>p)&&t(d),e<p)break}else{if((e===p||a.showSummaryOnHide&&e===p+1)&&t(d),e<=p)break}else if(d.hasClass("jqgroup"))if(e=parseInt(d.data("jqgrouplevel"),10),w){if(e<=p)break;t(d)}else{if(e<=p)break;e===p+1&&(d.find(">td>span.tree-wrap").removeClass(f).addClass(m),
t(d));q=!1}else(w||q)&&t(d);b(n).css("display",w?"none":"");l.frozenColumns&&b(this).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:g,iRowEnd:d.length?d[0].rowIndex-1:-1}}}]);this.fixScrollOffsetAndhBoxPadding();b(this).triggerHandler("jqGridGroupingClickGroup",[c,w]);b.isFunction(l.onClickGroup)&&l.onClickGroup.call(this,c,w)});return!1},groupingRender:function(c,k){function l(a,c,k,
l,e){var h=n[a],d,v="",q,r,y,D=0,w,z,B,C=!0;if(0!==c&&0!==n[a].idx)for(d=a;0<=d;d--)if(n[d].idx===n[a].idx-c){h=n[d];break}a=h.cnt;for(w=void 0===e?l:0;w<p;w++){c="&#160;";d=t[w];for(q=0;q<h.summary.length;q++)if(r=h.summary[q],z=b.isArray(r.st)?r.st[k.idx]:r.st,B=b.isArray(d.summaryTpl)?d.summaryTpl[k.idx]:d.summaryTpl||"{0}",r.nm===d.name){"string"===typeof z&&"avg"===z.toLowerCase()&&(r.sd&&r.vd?r.v/=r.vd:r.v&&0<a&&(r.v/=a));try{r.groupCount=h.cnt,r.groupIndex=h.dataIndex,r.groupValue=h.value,
y=f.formatter("",r.v,w,r)}catch(J){y=r.v}c=u.format(B,y);d.summaryFormat&&(c=d.summaryFormat.call(f,k,c,y,d,r));break}r=q=!1;void 0!==e&&C&&!d.hidden&&(c=e,C=!1,1<l&&(q=!0,D=l-1),r=d.align,d.align="rtl"===m.direction?"right":"left",g.iconColumnName=d.name);0<D&&!d.hidden&&"&#160;"===c?(r&&(d.align=r),D--):(v+="<td role='gridcell' "+f.formatCol(w,1,"")+(q?"colspan='"+l+"'":"")+">"+c+"</td>",r&&(d.align=r))}return v}var a="",f=this[0],m=f.p,d=0,C=[],g=m.groupingView,q=b.makeArray(g.groupSummary),w=
g.groupField.length,n=g.groups,t=m.colModel,p=t.length,B=m.page,G=e.getGuiStyles.call(f,"gridRow","jqgroup ui-row-"+m.direction),z=e.getGuiStyles.call(f,"gridRow","jqfoot ui-row-"+m.direction);b.each(t,function(a,c){var b;for(b=0;b<w;b++)if(g.groupField[b]===c.name){C[b]=a;break}});q.reverse();b.each(n,function(e,h){var v,y=m.id+"ghead_"+h.idx,D=y+"_"+e,F=b.isFunction(g.groupCollapse)?g.groupCollapse.call(f,{group:h,rowid:D}):g.groupCollapse,A,x;x=0;var E,r;E=w-1===h.idx;var H;r="<span style='cursor:pointer;margin-"+
("rtl"===m.direction?"right:":"left:")+12*h.idx+"px;' class='"+g.commonIconClass+" "+(F?g.plusicon:g.minusicon)+" tree-wrap' onclick=\"jQuery('#"+u.jqID(m.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+D+"', this);return false;\"></span>";if(g._locgr&&!(h.startRow+h.cnt>(B-1)*k&&h.startRow<B*k))return!0;for(A=e-1;0<=A;A--)if(n[A].idx<h.idx&&n[A].collapsed){F=H=!0;break}void 0!==F&&(h.collapsed=F);d++;try{b.isArray(g.formatDisplayField)&&b.isFunction(g.formatDisplayField[h.idx])?(h.displayValue=
g.formatDisplayField[h.idx].call(f,h.displayValue,h.value,t[C[h.idx]],h.idx,g),v=h.displayValue):v=f.formatter(D,h.displayValue,C[h.idx],h.value)}catch(I){v=h.displayValue}a+="<tr id='"+D+"' data-jqgrouplevel='"+h.idx+"' "+(F&&H?"style='display:none;' ":"")+"role='row' class='"+G+" "+y+"'>";y=b.isFunction(g.groupText[h.idx])?g.groupText[h.idx].call(f,v,h.cnt,h.summary):u.template(g.groupText[h.idx],v,h.cnt,h.summary);"string"!==typeof y&&"number"!==typeof y&&(y=v);"header"===g.groupSummaryPos[h.idx]?
(v=1,"cb"!==t[0].name&&"cb"!==t[1].name||v++,"subgrid"!==t[0].name&&"subgrid"!==t[1].name||v++,a+=l(e,0,h,v,r+"<span class='cell-wrapper'>"+y+"</span>")):a+="<td role='gridcell' style='padding-left:"+12*h.idx+"px;' colspan='"+p+"'>"+r+y+"</td>";a+="</tr>";if(E){E=n[e+1];v=h.startRow;r=void 0!==E?E.startRow:n[e].startRow+n[e].cnt;g._locgr&&(x=(B-1)*k,x>h.startRow&&(v=x));for(;v<r&&c[v-x];v++)a+=c[v-x].join("");if("header"!==g.groupSummaryPos[h.idx]){if(void 0!==E){for(A=0;A<g.groupField.length&&E.dataIndex!==
g.groupField[A];A++);d=g.groupField.length-A}for(x=0;x<d;x++)q[x]&&(a+="<tr data-jqfootlevel='"+(h.idx-x)+(F&&(0<h.idx-x||!g.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+z+"'>",a+=l(e,x,n[h.idx-x],0),a+="</tr>");d=A}}});this.off("jqGridShowHideCol.groupingRender").on("jqGridShowHideCol.groupingRender",function(){var a=m.iColByName[g.iconColumnName],c,d,e;if(0<=b.inArray("header",g.groupSummaryPos)){for(c=0;c<t.length;c++)if(!t[c].hidden){e=c;break}if(void 0!==e&&a!==e){for(c=
0;c<f.rows.length;c++)d=f.rows[c],b(d).hasClass("jqgroup")&&(b(d.cells[e]).html(d.cells[a].innerHTML),b(d.cells[a]).html("&nbsp;"));g.iconColumnName=t[e].name}}});return a},groupingGroupBy:function(c,k){return this.each(function(){var l=this.p,a=l.groupingView,f,m;"string"===typeof c&&(c=[c]);l.grouping=!0;a._locgr=!1;void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);for(f=0;f<a.groupField.length;f++)m=l.colModel[l.iColByName[a.groupField[f]]],!a.groupColumnShow[f]&&a.visibiltyOnNextGrouping[f]&&
null!=m&&!0===m.hidden&&e.showCol.call(b(this),a.groupField[f]);for(f=0;f<c.length;f++)a.visibiltyOnNextGrouping[f]=b(l.idSel+"_"+u.jqID(c[f])).is(":visible");l.groupingView=b.extend(l.groupingView,k||{});a.groupField=c;b(this).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){var k=this.p,l=this.tBodies[0],a=k.groupingView;void 0===c&&(c=!0);k.grouping=!1;if(!0===c){for(k=0;k<a.groupField.length;k++)!a.groupColumnShow[k]&&a.visibiltyOnNextGrouping[k]&&e.showCol.call(b(this),
a.groupField);b("tr.jqgroup, tr.jqfoot",l).remove();b("tr.jqgrow",l).filter(":hidden").show()}else b(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(c,b,e,a,f,m){var d={sum:function(){return parseFloat(b||0)+parseFloat(m[e]||0)},min:function(){return""===b?parseFloat(m[e]||0):Math.min(parseFloat(b),parseFloat(m[e]||0))},max:function(){return""===b?parseFloat(m[e]||0):Math.max(parseFloat(b),parseFloat(m[e]||0))},count:function(){""===b&&(b=0);return m.hasOwnProperty(e)?b+1:0},
avg:function(){return d.sum()}};if(!d[c])throw"jqGrid Grouping No such method: "+c;c=d[c]();null!=a&&("fixed"===f?c=c.toFixed(a):(a=Math.pow(10,a),c=Math.round(c*a)/a));return c}}})});
//# sourceMappingURL=grid.grouping.map
